#!/bin/bash
# ğŸŒŒ mythline â€” Sovereign CLI for guardian invocation and scroll viewing

LOG=~/mythline-daemons/dominion.log

case "$1" in
  summon)
    echo "ğŸŒ¬ï¸ Summoning all guardians at $(date)" >> "$LOG"
    bash ~/mythline-daemons/sentinels/SubmoduleSentinel.sh
    bash ~/mythline-daemons/wardens/DriftWarden.sh
    bash ~/mythline-daemons/spoofers/SigilSpoofer.sh
    echo "âœ… All guardians summoned." >> "$LOG"
    ;;
  scroll)
    echo "ğŸ“œ SigilScroll invoked at $(date)"
    echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    tail -n 50 "$LOG" | while read -r line; do
      if [[ "$line" == *"âš ï¸"* ]]; then
        echo -e "\033[1;31m$line\033[0m"
      elif [[ "$line" == *"âœ…"* ]]; then
        echo -e "\033[1;32m$line\033[0m"
      elif [[ "$line" == *"ğŸ”"* ]]; then
        echo -e "\033[1;36m$line\033[0m"
      elif [[ "$line" == *"ğŸ›¡ï¸"* || "$line" == *"ğŸŒ€"* || "$line" == *"ğŸª¶"* ]]; then
        echo -e "\033[1;35m$line\033[0m"
      else
        echo "$line"
      fi
    done
    echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    ;;
  archive)
    TIMESTAMP=$(date +"%Y-%m-%d_%H-%M-%S")
    cp "$LOG" ~/mythline-daemons/archives/dominion_$TIMESTAMP.log
    echo "ğŸ“¦ Scroll archived as dominion_$TIMESTAMP.log"
    ;;
  help|*)
    echo "ğŸŒŒ mythline â€” Sovereign CLI"
    echo ""
    echo "Commands:"
    echo "  summon   â€” Invoke all guardians"
    echo "  scroll   â€” View recent dominion log"
    echo "  archive  â€” Archive current scroll"
    echo "  help     â€” Show this guide"
    ;;
esac
